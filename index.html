<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω–¥–∏—Ç–µ—Ä—Å—å–∫–∞ —Ñ–∞–±—Ä–∏–∫–∞</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .allproduct {
            background-color: white;
            width: 6%;
            max-width: 600px;
            padding: 20px;
            border-radius: 10px;
            overflow-y: auto;
            max-height: 80%;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        #cart {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        #cart.active {
            display: flex; /* –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É */
        }

        #cart .cart-items {
            background-color: white;
            width: 90%;
            max-width: 700px;
            padding: 220px;
            border-radius: 10px;
            overflow-y: auto;
            max-height: 80%;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .cart-item .quantity-controls {
            display: flex;
            align-items: center;
        }

        .cart-item button {
            margin: 0 5px;
        }

        /* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è */
        .cart-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #019524;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="button">
        <button onclick="location.href='index.html'">–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞</button>
        <button onclick="location.href='reviews.html'">–í—ñ–¥–≥—É–∫–∏</button>
        <button onclick="location.href='social.html'">–°–æ—Ü. –º–µ—Ä–µ–∂—ñ</button>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <button class="cart-toggle" onclick="toggleCart()">
        üõí –ö–æ—à–∏–∫ <span id="cartCount">0</span>
    </button>

    <div class="container">
        <h1>–ù–∞—à –º–∞–≥–∞–∑–∏–Ω</h1>
        
        <div class="products" id="products">
            <script src="index.js"></script>
        </div>

        <div class="cart" id="cart">
            <div class="cart-items" id="cartItems">
                <h1>–í–∞—à –∫–æ—à–∏–∫</h1>
            </div>
            <div class="allproduct" id="total">–ò—Ç–æ–≥–æ: 0 –ì—Ä–Ω</div>
            <button onclick="showCheckoutForm()">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            <button class="cart-close-btn" onclick="closeCart()">–ó–∞–∫—Ä–∏—Ç–∏ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCheckoutForm()">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–∫–∞–∑—É</h2>
            <form id="checkoutForm" onsubmit="submitOrder(event)">
                <div class="form-group">
                    <label for="fullName">–Ü–º'—è –ü—Ä—ñ–∑–≤–∏—â–µ:</label>
                    <input type="text" id="fullName" required>
                </div>
                <div class="form-group">
                    <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:</label>
                    <input type="number" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="address">–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
                    <input type="text" id="address" required>
                </div>
                <div class="form-group">
                    <label for="email">–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞:</label>
                    <input type="text" id="email" required>
                </div>
                <div class="form-group">
                    <label>–°–ø–æ—Å–æ–±–∏ –æ–ø–ª–∞—Ç–∏:</label>
                    <div class="payment-methods">
                        <div class="payment-method">
                            <input type="radio" id="cash" name="paymentMethod" value="cash" required>
                            <label for="cash">–ì–æ—Ç—ñ–≤–∫–æ—é –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ</label>
                        </div>
                        <div class="payment-method">
                            <input type="radio" id="card" name="paymentMethod" value="card">
                            <label for="card">–ö–∞—Ä—Ç–æ—é –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ</label>
                        </div>
                        <div class="allproduct" id="total">–ò—Ç–æ–≥–æ: 0 –ì—Ä–Ω</div>
                    </div>
                </div>
                <button type="submit">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            </form>
        </div>
    </div>

    <script>
        let cart = {};

        function toggleCart() {
            const cartElement = document.getElementById('cart');
            cartElement.classList.toggle('active'); // –û—Ç–∫—Ä—ã—Ç—å –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        }

        function closeCart() {
            const cartElement = document.getElementById('cart');
            cartElement.classList.remove('active'); // –ó–∞–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        }

        function updateCartCount() {
            const count = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function displayProducts() {
            const productsDiv = document.getElementById('products');
            productsDiv.innerHTML = products.map(product => `
                <div class="product">
                    <h3>${product.name}</h3>
                    <img src="${product.image}" alt="${product.name}">
                    <div class="description">${product.description}</div>
                    <div class="price">${product.price} –ì—Ä–Ω</div>
                    <button onclick="addToCart(${product.id})">–î–æ –∫–æ—à–∏–∫–∞</button>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            if (cart[productId]) {
                cart[productId].quantity++;
            } else {
                const product = products.find(p => p.id === productId);
                cart[productId] = {
                    ...product,
                    quantity: 1
                };
            }
            updateCart();
            updateCartCount();
        }

        function incrementQuantity(productId) {
            if (cart[productId]) {
                cart[productId].quantity++;
                updateCart();
                updateCartCount();
            }
        }

        function decrementQuantity(productId) {
            if (cart[productId]) {
                if (cart[productId].quantity > 1) {
                    cart[productId].quantity--;
                } else {
                    delete cart[productId];
                }
                updateCart();
                updateCartCount();
            }
        }

        function updateCart
        () {
            const cartItems = document.getElementById('cartItems');
            const total = document.getElementById('total');
            
            cartItems.innerHTML = Object.values(cart).map(item => `
                <div class="cart-item">
                    <div>${item.name} - ${item.price} –ì—Ä–Ω</div>
                    <div class="quantity-controls">
                        <button onclick="decrementQuantity(${item.id})">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="incrementQuantity(${item.id})">+</button>
                    </div>
                </div>
            `).join('');
            
            const totalSum = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
            total.textContent = `–ò—Ç–æ–≥–æ: ${totalSum} –ì—Ä–Ω`;
        }

        function showCheckoutForm() {
    const checkoutModal = document.getElementById('checkoutModal');
    if (Object.keys(cart).length === 0) {
        alert('–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!');
        return;
    }
    closeCart(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É //
    checkoutModal.style.display = 'block'; // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ //
}

function closeCheckoutForm() {
    document.getElementById('checkoutModal').style.display = 'none';
}


        function closeCheckoutForm() {
            document.getElementById('checkoutModal').style.display = 'none';
        }

        function submitOrder(event) {
            event.preventDefault();

            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const email = document.getElementById('email').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const paymentText = paymentMethod === 'cash' ? '–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏' : '–ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏';

            const order = {
                customerInfo: {
                    fullName,
                    phone,
                    address,
                    email,
                    paymentMethod: paymentText
                },
                items: Object.values(cart).map(item => `${item.name} (${item.quantity} —à—Ç—É–∫–∞.)`),
                total: Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0),
                datetime: new Date().toLocaleString()
            };

            const TELEGRAM_BOT_URL = 'https://api.telegram.org/bot7793475696:AAHc4uz8vOC0MVlVpD-5ktoXLYdunfK7Lzo/sendMessage';
            const TELEGRAM_CHAT_ID = '5160015392';

            const message = `
                üõçÔ∏è –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!
                
                üë§ –ü–æ–∫—É–ø–∞—Ç–µ–ª—å:
                –ò–º—è: ${order.customerInfo.fullName}
                –¢–µ–ª–µ—Ñ–æ–Ω: ${order.customerInfo.phone}
                –ê–¥—Ä–µ—Å: ${order.customerInfo.address}
                –ï–ª–µ–∫—Ç—Ä–æ–Ω–∞—è –ø–æ—á—Ç–∞: ${order.customerInfo.email}
                
                üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: ${order.customerInfo.paymentMethod}
                
                üì¶ –¢–æ–≤–∞—Ä—ã:
                ${order.items.join('\n')}

                üí∞ –°—É–º–º–∞: ${order.total} –ì—Ä–Ω
                üïí –í—Ä–µ–º—è: ${order.datetime}
            `;

            fetch(TELEGRAM_BOT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message
                })
            })
            .then(response => response.json())
            .then(data => {
                alert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!');
                cart = {};
                updateCart();
                updateCartCount();
                closeCheckoutForm();
                document.getElementById('checkoutForm').reset();
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞');
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        displayProducts();
    </script>
</body>
</html>